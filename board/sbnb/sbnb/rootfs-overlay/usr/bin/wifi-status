#!/bin/sh
# Show WiFi connection status
# Usage: wifi-status [INTERFACE]

IFACE="${1:-wlan0}"

echo "=== WiFi Status ==="
echo ""

# List all wireless interfaces
echo "Wireless interfaces:"
iw dev 2>/dev/null | grep -E "Interface|ssid|channel|txpower" | sed 's/^/  /'
echo ""

# Check if interface exists
if ! ip link show "$IFACE" >/dev/null 2>&1; then
    echo "Interface $IFACE not found"
    exit 1
fi

# Show connection status
echo "Connection status ($IFACE):"
iw dev "$IFACE" link 2>/dev/null | sed 's/^/  /'
echo ""

# Show IP address
echo "IP address:"
ip -4 addr show "$IFACE" 2>/dev/null | grep inet | awk '{print "  " $2}'
echo ""

# Show wpa_supplicant service status
echo "Service status:"
systemctl is-active "wpa_supplicant@${IFACE}" 2>/dev/null && \
    echo "  wpa_supplicant@${IFACE}: active" || \
    echo "  wpa_supplicant@${IFACE}: inactive"
